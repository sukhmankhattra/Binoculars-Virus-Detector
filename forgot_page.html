<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Forgot Password</title>
  <link rel="stylesheet" href="combined ui/combined_css.css" />
  <style>
    body {
      background: linear-gradient(to right, #4db2ec, #c4364e);
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      font-family: 'Arial', sans-serif;
      margin: 0;
      transition: background 0.3s ease, color 0.3s ease;
    }

    .forgot-container {
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);
      width: 400px;
      padding: 40px 50px;
      text-align: center;
      transition: background 0.3s ease, color 0.3s ease;
    }

    .forgot-container h1 {
      margin-bottom: 20px;
      font-weight: bold;
      color: #333;
    }

    .forgot-container form {
      display: flex;
      flex-direction: column;
    }

    .forgot-container input {
      background: #eee;
      border: none;
      padding: 12px 15px;
      margin: 8px 0;
      width: 100%;
      border-radius: 4px;
      font-size: 14px;
      transition: background 0.3s ease, color 0.3s ease;
    }

    .forgot-container button {
      border: none;
      padding: 12px 45px;
      margin-top: 20px;
      background-color: #4db2ec;
      color: #fff;
      font-size: 14px;
      font-weight: bold;
      letter-spacing: 1px;
      text-transform: uppercase;
      cursor: pointer;
      border-radius: 4px;
      transition: background-color 0.3s ease;
    }

    .forgot-container button:hover {
      background-color: #3a94d8;
    }

    .back-link {
      margin-top: 20px;
      display: inline-block;
      color: #4db2ec;
      text-decoration: none;
      font-size: 14px;
      font-weight: bold;
      transition: color 0.3s ease;
    }

    .back-link:hover {
      color: #3a94d8;
    }

    .message {
      margin-top: 15px;
      font-size: 14px;
      min-height: 18px;
    }

    .loading {
      margin-top: 10px;
      font-size: 14px;
      color: #4db2ec;
    }

    /* Dark mode styles */
    body.dark-mode {
      background: linear-gradient(to right, #121212, #2c2c2c);
      color: #eee;
    }

    body.dark-mode .forgot-container {
      background: #1e1e1e;
      color: #eee;
    }

    body.dark-mode .forgot-container h1 {
      color: #fff;
    }

    body.dark-mode .forgot-container input {
      background: #333;
      color: #fff;
    }

    body.dark-mode .forgot-container button {
      background-color: #555;
    }

    body.dark-mode .forgot-container button:hover {
      background-color: #444;
    }

    body.dark-mode .back-link {
      color: #90caf9;
    }

    body.dark-mode .back-link:hover {
      color: #64b5f6;
    }

    /* Theme toggle button */
    .toggle-theme {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 999;
      background-color: #fff;
      border: none;
      border-radius: 50%;
      padding: 10px 12px;
      font-size: 20px;
      cursor: pointer;
      box-shadow: 0 2px 6px rgba(0,0,0,0.3);
      transition: background-color 0.3s;
    }

    .dark-mode .toggle-theme {
      background-color: #444;
      color: #fff;
    }

    .toggle-theme:hover {
      background-color: #ddd;
    }

    .dark-mode .toggle-theme:hover {
      background-color: #555;
    }
  </style>
</head>
<body>
  <div class="forgot-container">
    <h1>Forgot Password</h1>
    <form id="forgotPasswordForm">
      <input type="email" id="email" placeholder="Enter your email" required aria-label="Email address" />
      <button type="submit" aria-label="Send reset link">Send Reset Link</button>
      <div class="message" id="resetMessage" aria-live="polite"></div>
      <div class="loading" id="loadingIndicator" style="display: none;">Sending reset link...</div>
    </form>
    <a href="combined ui/combined_login_signup.html" class="back-link">Back to Login/Signup</a>
  </div>

  <!-- Toggle button -->
  <button class="toggle-theme" onclick="toggleTheme()" id="themeToggle">üåô</button>

  <script>
    // Email form handling
    const form = document.getElementById('forgotPasswordForm');
    const emailInput = document.getElementById('email');
    const messageDiv = document.getElementById('resetMessage');
    const loadingIndicator = document.getElementById('loadingIndicator');

    form.addEventListener('submit', function (e) {
      e.preventDefault();
      const email = emailInput.value.trim();
      const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;

      if (!emailRegex.test(email)) {
        messageDiv.textContent = '‚ö†Ô∏è Please enter a valid email address.';
        messageDiv.style.color = 'orangered';
        return;
      }

      messageDiv.textContent = '';
      loadingIndicator.style.display = 'block';

      // Simulate sending the reset link
      setTimeout(() => {
        loadingIndicator.style.display = 'none';
        messageDiv.textContent = `‚úÖ A password reset link has been sent to ${email}`;
        messageDiv.style.color = 'green';
        emailInput.value = '';
      }, 1500);
    });

    // Dark mode toggle logic
    const body = document.body;
    const toggleBtn = document.getElementById('themeToggle');

    function setTheme(theme) {
      body.classList.toggle('dark-mode', theme === 'dark');
      toggleBtn.textContent = theme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
      localStorage.setItem('theme', theme);
    }

    function toggleTheme() {
      const currentTheme = body.classList.contains('dark-mode') ? 'dark' : 'light';
      setTheme(currentTheme === 'dark' ? 'light' : 'dark');
    }

    // Apply saved theme on load
    const savedTheme = localStorage.getItem('theme') || 'light';
    setTheme(savedTheme);
  </script>
</body>
</html>